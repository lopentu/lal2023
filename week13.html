<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.340">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="謝舒凱 台大語言所">

<title>Week 13 文字系統</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="week13_files/libs/clipboard/clipboard.min.js"></script>
<script src="week13_files/libs/quarto-html/quarto.js"></script>
<script src="week13_files/libs/quarto-html/popper.min.js"></script>
<script src="week13_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="week13_files/libs/quarto-html/anchor.min.js"></script>
<link href="week13_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="week13_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="week13_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="week13_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="week13_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="week13.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Week 13 文字系統</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>謝舒凱 台大語言所 </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="文字系統-writing-systems" class="level1">
<h1>文字系統 | Writing Systems</h1>
<section id="結繩記事" class="level2">
<h2 class="anchored" data-anchor-id="結繩記事">結繩記事</h2>
<ul>
<li>文字發明前，人所使用的一種記事方法。即在一條繩子上打結。上古時期的中原地區及秘魯印地安人皆有此習慣</li>
</ul>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="../pics/sheng.jpeg" class="img-fluid"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="../pics/khipu.jpeg" class="img-fluid"></p>
</div>
</div>
</div>
</section>
<section id="section" class="level2">
<h2 class="anchored" data-anchor-id="section"></h2>
<blockquote class="blockquote">
<p>【昔者倉頡作書而天雨粟，鬼夜哭。】《淮南子·本經訓》</p>
</blockquote>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../pics/cangjie.jpeg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">雙瞳四目</figcaption>
</figure>
</div>
</section>
<section id="representing-languages" class="level2">
<h2 class="anchored" data-anchor-id="representing-languages">Representing Languages</h2>
<ul>
<li><p>探問紀錄與表達語言的文字符號系統</p>
<ul>
<li><p>‘spoken language’ vs ‘written language’ (note: writing is a fairly recent invention) 語言「也許」始於 300 -400 萬年前的直立人；文字則「相對確定」約在 1 萬年前萌芽於新石器時代的刻符與岩畫。</p></li>
<li><p><strong>文字嘗試再現語言，但不是語言</strong> Only 25% of the world’s languages have written forms.</p></li>
</ul></li>
<li><p>人類文字系統</p></li>
</ul>
</section>
<section id="文字系統的成分" class="level2">
<h2 class="anchored" data-anchor-id="文字系統的成分">文字系統的成分</h2>
<blockquote class="blockquote">
<p>文字系統需要至少包含甚麼?</p>
</blockquote>
<ul>
<li><p>A script: a set of graphic symbols used to represent the units of a writing system.</p></li>
<li><p>Orthography: a set of rules and conventions for using a writing system to represent a language in a readable and understandable manner.</p></li>
</ul>
</section>
<section id="自由與黏着" class="level2">
<h2 class="anchored" data-anchor-id="自由與黏着">自由與黏着</h2>
<ul>
<li><p>free grapheme and bound grapheme (e.g.&nbsp;變音符號 diacritic marks 只能和其他字素結合出現。法文的 `)</p>
<ul>
<li>梵文中的變音符號 （黏着字素） 出現在輔音的位置各不同（上、下、前、後） क <code>&lt;k&gt;</code>: को <code>&lt;ke&gt;</code> का <code>&lt;kā&gt;</code> कि <code>&lt;ki&gt;</code> की <code>&lt;kī&gt;</code> कु <code>&lt;ku&gt;</code> कू <code>&lt;kū&gt;</code></li>
</ul></li>
<li><p><strong>graphemes</strong> vs <strong>allograph</strong> 的問題；異體字。</p></li>
</ul>
<div class="callout callout-style-default callout-warning callout-titled" title="ligature">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
ligature
</div>
</div>
<div class="callout-body-container callout-body">
<p>連字（ligature） 是由兩個或多個字素合在一起的符號單位，並且在書寫時以一個單一的字形出現。例如，丹麥語的字母<code>æ</code> 是字母 <code>a</code> 和 <code>e</code> 的連字；英文<code>ﬁ</code>是字母<code>f</code>和<code>i</code>的連字。(但這僅僅是出於印刷審美考慮，或是書寫效率，在書寫時減少抬筆的次數。)</p>
</div>
</div>
</section>
<section id="文字簡史" class="level2">
<h2 class="anchored" data-anchor-id="文字簡史">文字簡史</h2>
<ul>
<li>原始文字時期
<ul>
<li>文字源於圖畫 (picture writing)</li>
</ul></li>
<li>古典文字時期
<ul>
<li>3200 BC 西亞兩河流域的蘇美人創造「楔形文字」。</li>
<li>北非尼羅河流域的古埃及人創造「聖書字」(hieroglyphics)，使用了三千多年。</li>
<li>1300 BC 中國黃河流域殷商帝國創立「甲骨文」</li>
<li>其他：2000 BC 中美洲的「馬雅」、中國「彞文」</li>
</ul></li>
<li>字母文字時期
<ul>
<li>1500 開始因應貿易需求的字母文字</li>
<li>linear-B / Byblos /</li>
<li>腓尼基、希臘、拉丁字母</li>
</ul></li>
</ul>
</section>
<section id="section-1" class="level2">
<h2 class="anchored" data-anchor-id="section-1"></h2>
<p><img src="../pics/wenzihua1.png" class="img-fluid"></p>
<blockquote class="blockquote">
<p>一個名爲「鼈隨妻」(turtle-following-his-wife) 的人給他的兒子（小子’little man’）捎信要他回家，並隨信附上 53 元作爲盤纏。</p>
</blockquote>
<p><img src="../pics/wenzihua2.png" class="img-fluid"></p>
</section>
</section>
<section id="文字系統分類與分布" class="level1">
<h1>文字系統：分類與分布</h1>
<p><img src="../pics/world.scripts.png" class="img-fluid"></p>
<section id="從表達的功能來看" class="level2">
<h2 class="anchored" data-anchor-id="從表達的功能來看">從表達的功能來看</h2>
<p><img src="../pics/world.scripts2.png" class="img-fluid"></p>
</section>
<section id="logograms-語素文字" class="level2">
<h2 class="anchored" data-anchor-id="logograms-語素文字">Logograms 語素文字</h2>
<ul>
<li><p>a logogram, or logograph, is a symbol that represents a word or a morpheme. [表達想法]</p></li>
<li><p>two subtypes of logographic system:</p>
<ul>
<li><p><strong>pictograms</strong>: pictures or symbols that represent an object or idea and may communicate a message, but they are not direct representations of speech.</p></li>
<li><p><strong>ideograms</strong>: symbols that communicate or represent an idea, though they are not necessarily pictures of actual objects or events. When a picture becomes conventionalized, it may be an ideogram, like the peace sign.</p></li>
</ul></li>
</ul>
<p><img src="../pics/logogram.png" class="img-fluid"></p>
</section>
<section id="the-rebus-principle-假借" class="level2">
<h2 class="anchored" data-anchor-id="the-rebus-principle-假借">The Rebus Principle (「假借」)</h2>
<p>但是，所有已知的 logographic writing system 都含有一些語音成分(常來自 “假借”：the use of existing symbols, purely for their sounds regardless of their meaning, to represent new words)</p>
<ul>
<li>When a graphic sign no longer has a visual connection to the word it represents, it becomes a phonographic symbol, standing for the sounds that represent the word.</li>
<li>A single sign can then be used to represent all words with the same sound (同音字). e.g, My 曰 is a teacher.</li>
</ul>
</section>
<section id="漢字系統" class="level2">
<h2 class="anchored" data-anchor-id="漢字系統">漢字系統</h2>
<ul>
<li><p>語素文字或音節文字？</p></li>
<li><p>漢語的大量同音現象導致了漢字的「同音字」現象。(所以纔有<code>石室詩士施氏嗜獅</code> 這樣的文字遊戲。)</p></li>
</ul>
<div class="callout callout-style-default callout-warning callout-titled" title="同音字">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
同音字
</div>
</div>
<div class="callout-body-container callout-body">
<p>現代漢語常用的 1359 個音節形式（含聲調）中，每一個都是以平均 11 個漢字作爲其不同的書寫形式。</p>
</div>
</div>
<p><img src="../pics/同音字.png" class="img-fluid"></p>
<ul>
<li><a href="https://www.wikiwand.com/zh-tw/%E8%BD%89%E6%B3%A8#introduction"><strong>六書</strong></a>：（造字法）象形 (pictography)、指事 (abstract pictograms)。(組字法) 會意 (semantic extension)、形聲 (semantic-phonetic compound)。(用字法？) 假借 、轉注</li>
</ul>
</section>
<section id="練習" class="level2">
<h2 class="anchored" data-anchor-id="練習">練習</h2>
<p>以【口】爲例，請列出有口參與的字，並說明其造字法。</p>
</section>
<section id="logograms-and-phonograms" class="level2">
<h2 class="anchored" data-anchor-id="logograms-and-phonograms">Logograms and Phonograms</h2>
<ul>
<li>Pictograms and ideograms are not complete writing systems for any (sound-based) language.</li>
<li>Phonogram is a symbol based on sound rather than meaning. Phonographic systems include:
<ul>
<li>syllabary (syllabic)</li>
<li>alphabets (phonemic)</li>
</ul></li>
</ul>
<p><img src="../pics/phonogram.png" class="img-fluid"></p>
</section>
<section id="音節文字-syllabic-system-和-短音節文字-moraic-system" class="level2">
<h2 class="anchored" data-anchor-id="音節文字-syllabic-system-和-短音節文字-moraic-system">音節文字 Syllabic system 和 短音節文字 (moraic system)</h2>
<ul>
<li><p>書寫單位對應的是一個音節 (CV; CVC; V)</p></li>
<li><p>大部分的音節文字其實是短音節文字（onset-nucleus or coda only）。</p></li>
</ul>
<p><img src="../pics/syllabary.png" class="img-fluid"></p>
</section>
<section id="注音符號" class="level2">
<h2 class="anchored" data-anchor-id="注音符號">注音符號</h2>
<p><img src="../pics/bopomofo.png" class="img-fluid"></p>
</section>
</section>
<section id="phonographic-phonemic-alphabetic-c-v" class="level1">
<h1>Phonographic &gt; phonemic &gt; alphabetic (C, V)</h1>
<ul>
<li><p>全音素文字是以音素為單位的文字,字母表中除了子音字母, 還有母音字母。</p></li>
<li><p>比較常見的全音素文字有拉丁字母 (Latin)、基里爾字母 (Cyrillic)、 希臘字母 (Greek)、韓文字母 (Hangul)、回鶻/蒙古/滿文字母 (Uighur/Mongolian/Manchu script) 等。</p></li>
</ul>
<section id="alphabetic" class="level2">
<h2 class="anchored" data-anchor-id="alphabetic">Alphabetic</h2>
<p><code>True Alphabets</code></p>
<ul>
<li><p>A true alphabet is a writing system with symbols that mean all sorts of individual sounds, both consonants and vowels.</p></li>
<li><p>e.g., Roman alphabet, which is used in large parts of the world, the Greek alphabet, which is used in Greece and Cyprus, and the Cyrillic alphabet, which is used in many countries in Eastern Europe and Central Asia, where Russia had a major influence during the days of the Soviet Union.</p></li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>音素文字系統的結構符號（子音和母音）通常被稱爲<strong>字母 (letter)</strong>，而這些字母排列在一起就形成了<strong>字母表 (alphabet)</strong>。</p>
</div>
</div>
</section>
<section id="alphabetic-1" class="level2">
<h2 class="anchored" data-anchor-id="alphabetic-1">Alphabetic</h2>
<p><code>Abjads 子音文字</code> (Consonantal alphabets)</p>
<blockquote class="blockquote">
<p>Y cn stll rd wtht vwls.</p>
</blockquote>
<ul>
<li><p>abjad /ˈæbdʒæd/ (輔音音素文字)特點是每個符號都代表輔音，沒有元音字母。 Alphabets that do not show vowels but only consonants are called abjads.</p></li>
<li><p>「完全」的輔音音素文字是指文字完全沒有元音標示，如古腓尼基語 (Phoenician)。然而大部分現代的輔音音素文字，如阿拉伯文 (Arabic)、希伯萊文 (Hebrew)都「不完全」。它們可能有一 些附加元音符號。 Examples of abjads are the Arabic alphabet, which is used in much of the Muslim world, and the Hebrew alphabet used for Jewish languages like Hebrew and Yiddish. Both of these abjads are written in lines that run from right to left.</p></li>
</ul>
</section>
<section id="alphabetic-2" class="level2">
<h2 class="anchored" data-anchor-id="alphabetic-2">Alphabetic</h2>
<p><code>Abugidas : 母音副標文字</code></p>
<ul>
<li><p>abugida /ɑːbʊˈɡiːdə, ˈæb-/, alphasyllabary (母音附標文字) 是一類以輔音字母為主體、母音以附加符號形式標出的表音文字。</p></li>
<li><p>該書寫系統的主要特點是：子音字母本身即有元音,一般是/a/，構成一個音節；其它母音字母一般附加在子音字母的周圍 (前後上下均有可能) 替代預設母音，以改變音節的讀音。</p></li>
<li><p>南亞和東南亞的梵文文化圈普遍使用abugida作為其書寫形式。 <!-- 如藏文中,字母 ཀ 本身表示 /ka/，附標上母音後,ཀི表示/ki/, 表示 /ku/,ཀེ表示/ke/,ཀོ表示/ko/。 --></p></li>
</ul>
<p>Abugidas are alphabets where sequences of consonant+vowel are written as a unit based on the consonant letter, and one of the vowels is never written but understood by the consonant letter if no other vowel is written. Examples of abugidas are writing systems of India and Southeast Asia like Devanagari used for Hindi and Sanskrit.</p>
</section>
<section id="section-2" class="level2">
<h2 class="anchored" data-anchor-id="section-2"></h2>
<p><img src="../pics/world.scripts3.png" class="img-fluid"></p>
</section>
<section id="特殊的-abuigida-canadian-aboriginal-syllabics" class="level2">
<h2 class="anchored" data-anchor-id="特殊的-abuigida-canadian-aboriginal-syllabics">特殊的 Abuigida: Canadian Aboriginal Syllabics</h2>
<p>(子音會旋轉！)</p>
<p><img src="../pics/abuigida1.png" class="img-fluid"> <img src="../pics/abuigida2.png" class="img-fluid"></p>
<div class="callout callout-style-default callout-tip callout-titled" title="只要涉及分類，都是權宜性 ">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
只要涉及分類，都是權宜性
</div>
</div>
<div class="callout-body-container callout-body">
<p>Most writing systems are not purely one type.</p>
</div>
</div>
</section>
<section id="以下文字如何分類" class="level2">
<h2 class="anchored" data-anchor-id="以下文字如何分類">以下文字如何分類？</h2>
<div class="callout callout-style-default callout-tip callout-titled" title="練習">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
練習
</div>
</div>
<div class="callout-body-container callout-body">
<p>東巴文字 蒙古文字 楔形文字 喃字 狀字 女真文字 女書 韓國諺文 藏文 維吾爾文字 馬雅文字</p>
</div>
</div>
</section>
<section id="section-3" class="level2">
<h2 class="anchored" data-anchor-id="section-3"></h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../pics/complexities.of.writing.systems.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Complexities of Writing Systems</figcaption>
</figure>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>